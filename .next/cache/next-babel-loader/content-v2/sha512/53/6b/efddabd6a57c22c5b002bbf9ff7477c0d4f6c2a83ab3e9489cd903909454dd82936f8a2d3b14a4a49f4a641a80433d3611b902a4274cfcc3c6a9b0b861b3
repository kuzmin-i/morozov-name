{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/ikuzmin/Documents/morozov-name/pages/scrollama.js\";\nimport \"intersection-observer\";\n\nconst scrollama = require(\"scrollama\");\n\nimport React, { Component } from \"react\";\nimport ReactDOM, { render } from \"react-dom\";\nimport Map from '../components/map';\n\nclass Elements extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      'step': '0',\n      'progress': '0',\n      'webgl': false,\n      'scene': null,\n      'camera': null,\n      'renderer': null,\n      'object': null\n    };\n    this.webglCreated = this.webglCreated.bind(this);\n    this.add3DObject = this.add3DObject.bind(this);\n    this.rotate3DObject = this.rotate3DObject.bind(this);\n    this.threeRender = this.threeRender.bind(this);\n  }\n\n  componentDidMount() {\n    const scroller = scrollama();\n    scroller.setup({\n      step: \".step\",\n      progress: true\n    }).onStepProgress(response => {\n      this.setState({\n        'progress': response.progress\n      });\n    }).onStepEnter(response => {\n      this.setState({\n        'step': response.index\n      });\n    }).onStepExit(response => {});\n    window.addEventListener('resize', scroller.resize);\n  }\n\n  webglCreated() {\n    this.setState({\n      'webgl': true\n    });\n  }\n\n  add3DObject({\n    scene,\n    camera,\n    renderer,\n    object,\n    threeRender\n  }) {\n    this.setState({\n      scene: scene,\n      camera: camera,\n      renderer: renderer,\n      object: object\n    }, () => {\n      threeRender({\n        'step': this.state.step\n      });\n    });\n  }\n\n  rotate3DObject({\n    threeRender\n  }) {\n    let _object = this.state.object;\n    console.log(this.state);\n    /* if( this.state.step == 0 ) {\n        _object.rotation.x = 10 * this.state.progress - 0;\n        _object.rotation.y = 10 * this.state.progress - 0;\n        _object.rotation.z = 10 * this.state.progress - 0;\n      } else if( this.state.step == 1 ) {\n        _object.rotation.x = 40 * this.state.progress - 10;\n        _object.rotation.y = 40 * this.state.progress - 10;\n        _object.rotation.z = 40 * this.state.progress - 10;\n      } else if( this.state.step == 2 ) {\n        _object.rotation.x = 80 * this.state.progress - 40;\n        _object.rotation.y = 80 * this.state.progress - 40;\n        _object.rotation.z = 80 * this.state.progress - 40;\n      }\n      */\n\n    threeRender({\n      'step': this.state.step\n    });\n  }\n\n  threeRender({\n    step\n  }) {\n    let _threeRender = this.state.renderer;\n    let _scene = this.state.scene;\n    let _camera = this.state.camera;\n    let _object = _scene.children[0];\n\n    if (this.state.step == 0) {\n      _object.rotation.x = 1.39626 * this.state.progress - 0;\n      _object.rotation.y = 1.39626 * this.state.progress - 0;\n      _object.rotation.z = 1.39626 * this.state.progress - 0;\n    } else if (this.state.step == 1) {\n      _object.rotation.x = 2.79253 * this.state.progress - 1.39626;\n      _object.rotation.y = 2.79253 * this.state.progress - 1.39626;\n      _object.rotation.z = 2.79253 * this.state.progress - 1.39626;\n    } else if (this.state.step == 2) {\n      _object.rotation.x = 4 * this.state.progress - 2.79253;\n      _object.rotation.y = 4 * this.state.progress - 2.79253;\n      _object.rotation.z = 4 * this.state.progress - 2.79253;\n    }\n\n    _scene.children[0] = _object;\n\n    _threeRender.render(_scene, _camera);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"inline-flex\",\n        height: \"100vh\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step\",\n          \"data-step\": \"a\",\n          style: {\n            'width': '50vw',\n            'height': '100vh',\n            'background': 'orange'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step\",\n          \"data-step\": \"b\",\n          style: {\n            'width': '50vw',\n            'height': '100vh',\n            'background': 'grey'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"step\",\n          \"data-step\": \"c\",\n          style: {\n            'width': '50vw',\n            'height': '100vh',\n            'background': 'black'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Map\",\n        style: {\n          position: 'fixed',\n          right: 0\n        },\n        children: /*#__PURE__*/_jsxDEV(Map, {\n          step: this.state.step,\n          webgl: this.state.webgl,\n          object: this.state.object,\n          webglCreated: this.webglCreated,\n          rotate3DObject: this.rotate3DObject,\n          add3DObject: this.add3DObject,\n          threeRender: this.threeRender\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default Elements;","map":{"version":3,"sources":["/Users/ikuzmin/Documents/morozov-name/pages/scrollama.js"],"names":["scrollama","require","React","Component","ReactDOM","render","Map","Elements","constructor","props","state","webglCreated","bind","add3DObject","rotate3DObject","threeRender","componentDidMount","scroller","setup","step","progress","onStepProgress","response","setState","onStepEnter","index","onStepExit","window","addEventListener","resize","scene","camera","renderer","object","_object","console","log","_threeRender","_scene","_camera","children","rotation","x","y","z","display","height","position","right","webgl"],"mappings":"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","sourcesContent":["import \"intersection-observer\";\nconst scrollama = require(\"scrollama\");\n\nimport React, { Component } from \"react\";\nimport ReactDOM, { render } from \"react-dom\";\n\nimport Map from '../components/map'\n\nclass Elements extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            'step': '0', \n            'progress': '0',\n            'webgl': false, \n            'scene': null,\n            'camera': null,\n            'renderer': null,\n            'object': null\n        }\n\n        this.webglCreated = this.webglCreated.bind(this)\n        this.add3DObject = this.add3DObject.bind(this)\n        this.rotate3DObject = this.rotate3DObject.bind(this)\n        this.threeRender = this.threeRender.bind(this)\n\n    }\n\n    componentDidMount() {\n        const scroller = scrollama();\n\n        scroller.\n            setup({ \n                step: \".step\",\n                progress: true \n            })\n            .onStepProgress((response) => {\n                \n                this.setState({ 'progress': response.progress })\n            })\n            .onStepEnter((response) => {\n                this.setState({ 'step': response.index })\n            })\n            .onStepExit((response) => {\n                \n            })\n\n        window.addEventListener('resize', scroller.resize)\n    }\n\n    webglCreated() {\n        this.setState({ 'webgl': true })\n    }\n\n    add3DObject( {scene, camera, renderer, object, threeRender} ) {\n\n        this.setState({ \n            scene: scene,\n            camera: camera,\n            renderer: renderer,\n            object: object\n        }, () => {\n            threeRender( { 'step': this.state.step } )\n        })\n\n    }\n\n    rotate3DObject( { threeRender } ) {\n        let _object = this.state.object\n        \n        console.log(this.state)\n\n        /* if( this.state.step == 0 ) {\n            _object.rotation.x = 10 * this.state.progress - 0;\n            _object.rotation.y = 10 * this.state.progress - 0;\n            _object.rotation.z = 10 * this.state.progress - 0;\n          } else if( this.state.step == 1 ) {\n            _object.rotation.x = 40 * this.state.progress - 10;\n            _object.rotation.y = 40 * this.state.progress - 10;\n            _object.rotation.z = 40 * this.state.progress - 10;\n          } else if( this.state.step == 2 ) {\n            _object.rotation.x = 80 * this.state.progress - 40;\n            _object.rotation.y = 80 * this.state.progress - 40;\n            _object.rotation.z = 80 * this.state.progress - 40;\n          }\n          */\n\n          threeRender({'step': this.state.step})\n          \n    }\n\n    threeRender({ step }) {\n        let _threeRender = this.state.renderer\n        let _scene = this.state.scene\n        let _camera = this.state.camera\n\n        let _object = _scene.children[0]\n\n        if( this.state.step == 0 ) {\n            _object.rotation.x = 1.39626 * this.state.progress - 0;\n            _object.rotation.y = 1.39626 * this.state.progress - 0;\n            _object.rotation.z = 1.39626 * this.state.progress - 0;\n          } else if( this.state.step == 1 ) {\n            _object.rotation.x = 2.79253 * this.state.progress - 1.39626;\n            _object.rotation.y = 2.79253 * this.state.progress - 1.39626;\n            _object.rotation.z = 2.79253 * this.state.progress - 1.39626;\n          } else if( this.state.step == 2 ) {\n            _object.rotation.x = 4 * this.state.progress - 2.79253;\n            _object.rotation.y = 4 * this.state.progress - 2.79253;\n            _object.rotation.z = 4 * this.state.progress - 2.79253;\n          }\n          \n\n          _scene.children[0] = _object\n\n        _threeRender.render(_scene, _camera) \n    }\n    \n   \n\n    render() {\n        return(\n        <div style={{ display: \"inline-flex\", height: \"100vh\" }}>\n            <div>\n                <div className=\"step\" data-step=\"a\" style = {{ 'width': '50vw', 'height': '100vh', 'background': 'orange' }}></div>\n                <div className=\"step\" data-step=\"b\" style = {{ 'width': '50vw', 'height': '100vh', 'background': 'grey' }}></div>\n                <div className=\"step\" data-step=\"c\" style = {{ 'width': '50vw', 'height': '100vh', 'background': 'black' }}></div>\n            </div>\n            <div className = \"Map\" style={{ position: 'fixed', right: 0 }}>\n                <Map \n                    step = { this.state.step } \n                    webgl = { this.state.webgl } \n                    object = { this.state.object }\n                    webglCreated = { this.webglCreated } \n                    rotate3DObject = { this.rotate3DObject }\n                    add3DObject = { this.add3DObject }\n                    threeRender = { this.threeRender }\n                    />\n            </div>\n        </div>\n        )\n    }\n}\n\nexport default Elements"]},"metadata":{},"sourceType":"module"}