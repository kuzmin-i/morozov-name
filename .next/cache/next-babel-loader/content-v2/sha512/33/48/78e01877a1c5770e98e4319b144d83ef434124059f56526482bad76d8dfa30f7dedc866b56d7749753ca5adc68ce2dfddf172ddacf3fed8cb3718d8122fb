{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _classCallCheck from \"/Users/ikuzmin/Documents/morozov-name/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ikuzmin/Documents/morozov-name/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/ikuzmin/Documents/morozov-name/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/ikuzmin/Documents/morozov-name/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/ikuzmin/Documents/morozov-name/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ikuzmin/Documents/morozov-name/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/ikuzmin/Documents/morozov-name/pages/scrollama.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport \"intersection-observer\";\n\nvar scrollama = require(\"scrollama\");\n\nimport React, { Component } from \"react\";\nimport ReactDOM, { render } from \"react-dom\";\nimport Map from '../components/map';\n\nvar Elements = /*#__PURE__*/function (_Component) {\n  _inherits(Elements, _Component);\n\n  var _super = _createSuper(Elements);\n\n  function Elements(props) {\n    var _this;\n\n    _classCallCheck(this, Elements);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      'step': '0',\n      'progress': '0',\n      'webgl': false,\n      'scene': null,\n      'camera': null,\n      'renderer': null,\n      'object': null\n    };\n    _this.webglCreated = _this.webglCreated.bind(_assertThisInitialized(_this));\n    _this.add3DObject = _this.add3DObject.bind(_assertThisInitialized(_this));\n    _this.rotate3DObject = _this.rotate3DObject.bind(_assertThisInitialized(_this));\n    _this.threeRender = _this.threeRender.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Elements, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var scroller = scrollama();\n      scroller.setup({\n        step: \".step\",\n        progress: true\n      }).onStepProgress(function (response) {\n        _this2.setState({\n          'progress': response.progress\n        });\n      }).onStepEnter(function (response) {\n        _this2.setState({\n          'step': response.index\n        });\n      }).onStepExit(function (response) {});\n      window.addEventListener('resize', scroller.resize);\n    }\n  }, {\n    key: \"webglCreated\",\n    value: function webglCreated() {\n      this.setState({\n        'webgl': true\n      });\n    }\n  }, {\n    key: \"add3DObject\",\n    value: function add3DObject(_ref) {\n      var _this3 = this;\n\n      var scene = _ref.scene,\n          camera = _ref.camera,\n          renderer = _ref.renderer,\n          object = _ref.object,\n          threeRender = _ref.threeRender;\n      this.setState({\n        scene: scene,\n        camera: camera,\n        renderer: renderer,\n        object: object\n      }, function () {\n        threeRender({\n          'step': _this3.state.step\n        });\n      });\n    }\n  }, {\n    key: \"rotate3DObject\",\n    value: function rotate3DObject(_ref2) {\n      var threeRender = _ref2.threeRender;\n      var _object = this.state.object;\n      console.log(this.state);\n      /* if( this.state.step == 0 ) {\n          _object.rotation.x = 10 * this.state.progress - 0;\n          _object.rotation.y = 10 * this.state.progress - 0;\n          _object.rotation.z = 10 * this.state.progress - 0;\n        } else if( this.state.step == 1 ) {\n          _object.rotation.x = 40 * this.state.progress - 10;\n          _object.rotation.y = 40 * this.state.progress - 10;\n          _object.rotation.z = 40 * this.state.progress - 10;\n        } else if( this.state.step == 2 ) {\n          _object.rotation.x = 80 * this.state.progress - 40;\n          _object.rotation.y = 80 * this.state.progress - 40;\n          _object.rotation.z = 80 * this.state.progress - 40;\n        }\n        */\n\n      threeRender({\n        'step': this.state.step\n      });\n    }\n  }, {\n    key: \"threeRender\",\n    value: function threeRender(_ref3) {\n      var step = _ref3.step;\n      var _threeRender = this.state.renderer;\n      var _scene = this.state.scene;\n      var _camera = this.state.camera;\n      var _object = _scene.children[0];\n\n      if (this.state.step == 0) {\n        _object.rotation.x = 1.39626 * this.state.progress - 0;\n        _object.rotation.y = 1.39626 * this.state.progress - 0;\n        _object.rotation.z = 1.39626 * this.state.progress - 0;\n      } else if (this.state.step == 1) {\n        _object.rotation.x = 2.79253 * this.state.progress - 1.39626;\n        _object.rotation.y = 2.79253 * this.state.progress - 1.39626;\n        _object.rotation.z = 2.79253 * this.state.progress - 1.39626;\n      } else if (this.state.step == 2) {\n        _object.rotation.x = 4 * this.state.progress - 2.79253;\n        _object.rotation.y = 4 * this.state.progress - 2.79253;\n        _object.rotation.z = 4 * this.state.progress - 2.79253;\n      }\n\n      _scene.children[0] = _object;\n\n      _threeRender.render(_scene, _camera);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"inline-flex\",\n          height: \"100vh\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step\",\n            \"data-step\": \"a\",\n            style: {\n              'width': '50vw',\n              'height': '100vh',\n              'background': 'orange'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step\",\n            \"data-step\": \"b\",\n            style: {\n              'width': '50vw',\n              'height': '100vh',\n              'background': 'grey'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"step\",\n            \"data-step\": \"c\",\n            style: {\n              'width': '50vw',\n              'height': '100vh',\n              'background': 'black'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Map\",\n          style: {\n            position: 'fixed',\n            right: 0\n          },\n          children: /*#__PURE__*/_jsxDEV(Map, {\n            step: this.state.step,\n            webgl: this.state.webgl,\n            object: this.state.object,\n            webglCreated: this.webglCreated,\n            rotate3DObject: this.rotate3DObject,\n            add3DObject: this.add3DObject,\n            threeRender: this.threeRender\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this);\n    }\n  }]);\n\n  return Elements;\n}(Component);\n\nexport default Elements;","map":{"version":3,"sources":["/Users/ikuzmin/Documents/morozov-name/pages/scrollama.js"],"names":["scrollama","require","React","Component","ReactDOM","render","Map","Elements","props","state","webglCreated","bind","add3DObject","rotate3DObject","threeRender","scroller","setup","step","progress","onStepProgress","response","setState","onStepEnter","index","onStepExit","window","addEventListener","resize","scene","camera","renderer","object","_object","console","log","_threeRender","_scene","_camera","children","rotation","x","y","z","display","height","position","right","webgl"],"mappings":"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","sourcesContent":["import \"intersection-observer\";\nconst scrollama = require(\"scrollama\");\n\nimport React, { Component } from \"react\";\nimport ReactDOM, { render } from \"react-dom\";\n\nimport Map from '../components/map'\n\nclass Elements extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            'step': '0', \n            'progress': '0',\n            'webgl': false, \n            'scene': null,\n            'camera': null,\n            'renderer': null,\n            'object': null\n        }\n\n        this.webglCreated = this.webglCreated.bind(this)\n        this.add3DObject = this.add3DObject.bind(this)\n        this.rotate3DObject = this.rotate3DObject.bind(this)\n        this.threeRender = this.threeRender.bind(this)\n\n    }\n\n    componentDidMount() {\n        const scroller = scrollama();\n\n        scroller.\n            setup({ \n                step: \".step\",\n                progress: true \n            })\n            .onStepProgress((response) => {\n                \n                this.setState({ 'progress': response.progress })\n            })\n            .onStepEnter((response) => {\n                this.setState({ 'step': response.index })\n            })\n            .onStepExit((response) => {\n                \n            })\n\n        window.addEventListener('resize', scroller.resize)\n    }\n\n    webglCreated() {\n        this.setState({ 'webgl': true })\n    }\n\n    add3DObject( {scene, camera, renderer, object, threeRender} ) {\n\n        this.setState({ \n            scene: scene,\n            camera: camera,\n            renderer: renderer,\n            object: object\n        }, () => {\n            threeRender( { 'step': this.state.step } )\n        })\n\n    }\n\n    rotate3DObject( { threeRender } ) {\n        let _object = this.state.object\n        \n        console.log(this.state)\n\n        /* if( this.state.step == 0 ) {\n            _object.rotation.x = 10 * this.state.progress - 0;\n            _object.rotation.y = 10 * this.state.progress - 0;\n            _object.rotation.z = 10 * this.state.progress - 0;\n          } else if( this.state.step == 1 ) {\n            _object.rotation.x = 40 * this.state.progress - 10;\n            _object.rotation.y = 40 * this.state.progress - 10;\n            _object.rotation.z = 40 * this.state.progress - 10;\n          } else if( this.state.step == 2 ) {\n            _object.rotation.x = 80 * this.state.progress - 40;\n            _object.rotation.y = 80 * this.state.progress - 40;\n            _object.rotation.z = 80 * this.state.progress - 40;\n          }\n          */\n\n          threeRender({'step': this.state.step})\n          \n    }\n\n    threeRender({ step }) {\n        let _threeRender = this.state.renderer\n        let _scene = this.state.scene\n        let _camera = this.state.camera\n\n        let _object = _scene.children[0]\n\n        if( this.state.step == 0 ) {\n            _object.rotation.x = 1.39626 * this.state.progress - 0;\n            _object.rotation.y = 1.39626 * this.state.progress - 0;\n            _object.rotation.z = 1.39626 * this.state.progress - 0;\n          } else if( this.state.step == 1 ) {\n            _object.rotation.x = 2.79253 * this.state.progress - 1.39626;\n            _object.rotation.y = 2.79253 * this.state.progress - 1.39626;\n            _object.rotation.z = 2.79253 * this.state.progress - 1.39626;\n          } else if( this.state.step == 2 ) {\n            _object.rotation.x = 4 * this.state.progress - 2.79253;\n            _object.rotation.y = 4 * this.state.progress - 2.79253;\n            _object.rotation.z = 4 * this.state.progress - 2.79253;\n          }\n          \n\n          _scene.children[0] = _object\n\n        _threeRender.render(_scene, _camera) \n    }\n    \n   \n\n    render() {\n        return(\n        <div style={{ display: \"inline-flex\", height: \"100vh\" }}>\n            <div>\n                <div className=\"step\" data-step=\"a\" style = {{ 'width': '50vw', 'height': '100vh', 'background': 'orange' }}></div>\n                <div className=\"step\" data-step=\"b\" style = {{ 'width': '50vw', 'height': '100vh', 'background': 'grey' }}></div>\n                <div className=\"step\" data-step=\"c\" style = {{ 'width': '50vw', 'height': '100vh', 'background': 'black' }}></div>\n            </div>\n            <div className = \"Map\" style={{ position: 'fixed', right: 0 }}>\n                <Map \n                    step = { this.state.step } \n                    webgl = { this.state.webgl } \n                    object = { this.state.object }\n                    webglCreated = { this.webglCreated } \n                    rotate3DObject = { this.rotate3DObject }\n                    add3DObject = { this.add3DObject }\n                    threeRender = { this.threeRender }\n                    />\n            </div>\n        </div>\n        )\n    }\n}\n\nexport default Elements"]},"metadata":{},"sourceType":"module"}